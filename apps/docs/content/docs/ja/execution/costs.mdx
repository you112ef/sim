---
title: コスト計算
---

import { Accordion, Accordions } from 'fumadocs-ui/components/accordion'
import { Callout } from 'fumadocs-ui/components/callout'
import { Tab, Tabs } from 'fumadocs-ui/components/tabs'
import { Image } from '@/components/ui/image'

Simはすべてのワークフロー実行のコストを自動的に計算し、AIモデルの使用量と実行料金に基づいた透明な価格設定を提供します。これらのコストを理解することで、ワークフローを最適化し、予算を効果的に管理することができます。

## コストの計算方法

すべてのワークフロー実行には、次の2つのコスト要素が含まれます：

**基本実行料金**：1回の実行につき$0.001

**AIモデル使用料**：トークン消費量に基づく変動コスト

```javascript
modelCost = (inputTokens × inputPrice + outputTokens × outputPrice) / 1,000,000
totalCost = baseExecutionCharge + modelCost
```

<Callout type="info">
  AIモデルの価格は100万トークンあたりの金額です。実際のコストを算出するために1,000,000で割ります。AIブロックを使用しないワークフローは基本実行料金のみが発生します。
</Callout>

## ログでのモデル内訳

AIブロックを使用するワークフローでは、ログで詳細なコスト情報を確認できます：

<div className="flex justify-center">
  <Image
    src="/static/logs/logs-cost.png"
    alt="モデル内訳"
    width={600}
    height={400}
    className="my-6"
  />
</div>

モデル内訳には以下が表示されます：
- **トークン使用量**：各モデルの入力および出力トークン数
- **コスト内訳**：モデルごとおよび操作ごとの個別コスト
- **モデル分布**：使用されたモデルとその回数
- **総コスト**：ワークフロー実行全体の合計コスト

## 料金オプション

<Tabs items={['ホステッドモデル', '自前のAPIキー']}>
  <Tab>
    **ホステッドモデル** - Simは2.5倍の価格倍率でAPIキーを提供します：
    
    | モデル | 基本価格（入力/出力） | ホステッド価格（入力/出力） |
    |-------|---------------------------|----------------------------|
    | GPT-4o | $2.50 / $10.00 | $6.25 / $25.00 |
    | GPT-4.1 | $2.00 / $8.00 | $5.00 / $20.00 |
    | o1 | $15.00 / $60.00 | $37.50 / $150.00 |
    | o3 | $2.00 / $8.00 | $5.00 / $20.00 |
    | Claude 3.5 Sonnet | $3.00 / $15.00 | $7.50 / $37.50 |
    | Claude Opus 4.0 | $15.00 / $75.00 | $37.50 / $187.50 |
    
    *2.5倍の倍率はインフラストラクチャとAPI管理コストをカバーしています。*
  </Tab>
  
  <Tab>
    **自前のAPIキー** - 基本価格で任意のモデルを使用できます：
    
    | プロバイダー | モデル | 入力 / 出力 |
    |----------|---------|----------------|
    | Google | Gemini 2.5 | $0.15 / $0.60 |
    | Deepseek | V3, R1 | $0.75 / $1.00 |
    | xAI | Grok 4, Grok 3 | $5.00 / $25.00 |
    | Groq | Llama 4 Scout | $0.40 / $0.60 |
    | Cerebras | Llama 3.3 70B | $0.94 / $0.94 |
    | Ollama | ローカルモデル | 無料 |
    
    *マークアップなしでプロバイダーに直接支払い*
  </Tab>
</Tabs>

<Callout type="warning">
  表示価格は2025年9月10日時点のものです。最新の価格については、プロバイダーのドキュメントをご確認ください。
</Callout>

## コスト最適化戦略

<Accordions>
  <Accordion title="モデル選択">
    タスクの複雑さに基づいてモデルを選択してください。単純なタスクにはGPT-4.1-nano（$0.10/$0.40）を使用し、複雑な推論にはo1またはClaude Opusが必要な場合があります。
  </Accordion>
  
  <Accordion title="プロンプトエンジニアリング">
    構造化された簡潔なプロンプトは、品質を犠牲にすることなくトークン使用量を削減します。
  </Accordion>
  
  <Accordion title="ローカルモデル">
    重要度の低いタスクにはOllamaを使用して、API費用を完全に排除します。
  </Accordion>
  
  <Accordion title="キャッシングと再利用">
    頻繁に使用される結果を変数やファイルに保存して、AIモデル呼び出しの繰り返しを避けます。
  </Accordion>
  
  <Accordion title="バッチ処理">
    個別の呼び出しを行うのではなく、1回のAIリクエストで複数のアイテムを処理します。
  </Accordion>
</Accordions>

## 使用状況モニタリング

設定→サブスクリプションで使用状況と請求を監視できます：

- **現在の使用状況**：現在の期間のリアルタイムの使用状況とコスト
- **使用制限**：視覚的な進捗指標付きのプラン制限
- **請求詳細**：予測される料金と最低コミットメント
- **プラン管理**：アップグレードオプションと請求履歴

### プログラムによる使用状況追跡

APIを使用して、現在の使用状況と制限をプログラムで照会できます：

**エンドポイント：**

```text
GET /api/users/me/usage-limits
```

**認証：**
- APIキーを `X-API-Key` ヘッダーに含めてください

**リクエスト例：**

```bash
curl -X GET -H "X-API-Key: YOUR_API_KEY" -H "Content-Type: application/json" https://sim.ai/api/users/me/usage-limits
```

**レスポンス例：**

```json
{
  "success": true,
  "rateLimit": {
    "sync": { "isLimited": false, "limit": 10, "remaining": 10, "resetAt": "2025-09-08T22:51:55.999Z" },
    "async": { "isLimited": false, "limit": 50, "remaining": 50, "resetAt": "2025-09-08T22:51:56.155Z" },
    "authType": "api"
  },
  "usage": {
    "currentPeriodCost": 12.34,
    "limit": 100,
    "plan": "pro"
  }
}
```

**レスポンスフィールド：**
- `currentPeriodCost` は現在の請求期間の使用状況を反映します
- `limit` は個別の制限（無料/プロ）または組織のプール制限（チーム/エンタープライズ）から導出されます
- `plan` はユーザーに関連付けられた最優先のアクティブなプランです

## プラン制限

サブスクリプションプランによって使用制限が異なります：

| プラン | 月間使用制限 | レート制限（分あたり） |
|------|-------------------|-------------------------|
| **無料** | $10 | 5同期、10非同期 |
| **プロ** | $100 | 10同期、50非同期 |
| **チーム** | $500（プール） | 50同期、100非同期 |
| **エンタープライズ** | カスタム | カスタム |

## コスト管理のベストプラクティス

1. **定期的な監視**: 予期せぬ事態を避けるため、使用状況ダッシュボードを頻繁に確認する
2. **予算の設定**: プランの制限を支出のガードレールとして使用する
3. **ワークフローの最適化**: コストの高い実行を見直し、プロンプトやモデル選択を最適化する
4. **適切なモデルの使用**: タスクの要件に合わせてモデルの複雑さを選択する
5. **類似タスクのバッチ処理**: 可能な場合は複数のリクエストを組み合わせてオーバーヘッドを削減する

## 次のステップ

- [設定 → サブスクリプション](https://sim.ai/settings/subscription)で現在の使用状況を確認する
- 実行詳細を追跡するための[ロギング](/execution/logging)について学ぶ
- プログラムによるコスト監視のための[外部API](/execution/api)を探索する
- コスト削減のための[ワークフロー最適化テクニック](/blocks)をチェックする